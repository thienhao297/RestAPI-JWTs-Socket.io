
macOS and Linux:

const storage = multer.diskStorage({
    destination: function(req, file, cb) {
        cb(null, 'images');
    },
    filename: function(req, file, cb) {
        cb(null, new Date().toISOString() + file.originalname);
    }
});

exports.createPost = (req, res, next) => {
    ...
    const imageUrl = req.file.path
    ...
}

exports.updatePost = (req, res, next) => {
    ...
    imageUrl = req.file.path
}



Window should use this slightly modified version:

const { v4: uuidv4 } = require('uuid');
 
const storage = multer.diskStorage({
    destination: function(req, file, cb) {
        cb(null, 'images');
    },
    filename: function(req, file, cb) {
        cb(null, uuidv4())
    }
});

For this, install the uuid package by running:

npm install --save uuid

in createPosts and in updatePost change the imageUrl const:

exports.createPost = (req, res, next) => {
    ...
    const imageUrl = req.file.path.replace("\\" ,"/");
    ...
}

exports.updatePost = (req, res, next) => {
    ...
    imageUrl = req.file.path.replace("\\","/");
}
